:root {
    /* Переменная полной высоты header (высота + top + margin-bottom) */
    --header-height: 112px; /* 60px + 12px + 40px */
    /* Переменная нижнего отступа header */
    --header-margin-bottom: 40px; /* mb-10 */
}

@media (min-width: 768px) {
    :root {
        --header-height: 132px; /* 60px + 16px + 56px */
        --header-margin-bottom: 56px; /* md:mb-14 */
    }
}

@media (min-width: 1024px) {
    :root {
        --header-height: 140px; /* 72px + 12px + 40px */
        --header-margin-bottom: 56px; /* mb-10 (сброс на lg) */
    }
}

@media (min-width: 1280px) {
    :root {
        --header-height: 176px; /* 80px + 16px + 80px */
        --header-margin-bottom: 80px; /* xl:mb-20 */
    }
}

.header {
    @apply max-w-[1540px];
    @apply m-3 md:m-4 lg:m-3 xl:m-4;
    @apply mb-10 md:mb-14 xl:mb-20;
    @apply 3xl:mx-auto;

    /* Постоянная sticky позиция с top вместо margin-top */
    @apply sticky top-3 md:top-4 lg:top-3 xl:top-4;
    @apply z-100;

    @apply transition-transform;
}

.header_flat {
    /* Исключаем header из потока документа через отрицательный margin-bottom */
    /* Компенсируем: высоту header + top отступ */
    @apply -mb-[72px] md:-mb-[76px] lg:-mb-[84px] xl:-mb-[96px];
}

.header_without_margin {
    margin-top: calc(var(--header-height) * -1);
}

.header__container {
    @apply relative z-100;
    @apply rounded-3xl lg:bg-white;
}

.header {
    .header__main {
        @apply transition-all cursor-pointer;

        @apply shadow-[0_2px_8px_0_rgba(33,37,75,0.11)];
    }

    .header__extra {
        @apply transition-all duration-300 ease-in-out;
        @apply max-h-0 overflow-hidden opacity-0 scale-90;

        @apply max-lg:absolute max-lg:left-0 max-lg:right-0;
        @apply max-lg:shadow-[0_2px_8px_0_rgba(33,37,75,0.11)];
    }

    &[data-open="false"] {
        .header__extra {
            @apply !p-0 !m-0;
        }
    }

    &[data-open="true"] {
        .header__main {
            @apply shadow-none;
        }

        .header__container {
            @apply shadow-[0_2px_8px_0_rgba(33,37,75,0.11)];
        }

        .header__extra {
            @apply max-h-[1000px] opacity-100 scale-100;
        }
    }
}

.header[data-open="false"] .header__main:hover {
    @apply lg:scale-[1.01];
}

.header__overlay {
    @apply fixed inset-0 transition-all duration-300 pointer-events-none;
    @apply bg-blue-900/0;
    @apply z-99;
}

.header[data-open="true"] .header__overlay {
    @apply pointer-events-auto;
    @apply max-lg:bg-blue-900/50;
    @apply max-lg:backdrop-blur-xs;
}

/* Sticky header состояния */
.header__container.header_sticky {
    @apply transition-all duration-500 ease-in-out backdrop-blur-md;
    @apply opacity-100;
    will-change: opacity, transform;
    /* background: rgba(255, 255, 255, 0.95) !important; */
    /* box-shadow: 0 2px 20px 0 rgba(33, 37, 75, 0.15) !important; */
    transform: translateY(0);
}

.header__container.header_sticky.header_hidden {
    @apply opacity-0;
    transform: translateY(-50px);
    @apply pointer-events-none;
}

@media (prefers-reduced-motion: no-preference) {
    .header__container.header_sticky {
        @apply transition-all duration-200 ease-out;
    }
}
